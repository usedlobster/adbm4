function _wd_debounce(func,delay){let timeout=null;return function(...args){let context=this;timeout&&clearTimeout(timeout),timeout=setTimeout(()=>{func.apply(context,args)},delay)}}async function _wd_fetch(url,options){let controller=new AbortController;var timeout=options.timeout||5e3,timeout=setTimeout(()=>controller.abort(),timeout);try{return await fetch(url,{...options,signal:controller.signal})}catch(e){throw"AbortError"===e.name&&console.log("Request timed out"),e}finally{clearTimeout(timeout)}}window.addEventListener("load",function(){var b=document.getElementsByTagName("body");b&&b[0]&&(b[0].style.display="block"),new ScrollArrows});let refreshInProgress=null;async function _wd_api_token(url,payload,token,updateTokenCB=null){async function _make_request_(url,payload,token){payload={timeout:12500,method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(payload)};return token&&(payload.headers={"Content-Type":"application/json",Authorization:"Bearer "+token}),_wd_fetch(url,payload)}try{var response=await _make_request_(url,payload,token);if(401===response.status){if(refreshInProgress)return await refreshInProgress,_make_request_(url,payload,token);refreshInProgress=fetch("/api/v1/refresh-token",{method:"POST",headers:{Authorization:"Bearer "+token},timeout:5e3});try{var refreshResponse=await refreshInProgress;if(refreshResponse.ok){var newToken=await refreshResponse.json();if(newToken?.token)return updateTokenCB&&updateTokenCB(newToken.token),_make_request_(url,payload,newToken.token)}return window.location.href="/portal",null}finally{refreshInProgress=null}}return response}catch(e){throw console.error("API request failed:",e),e}}